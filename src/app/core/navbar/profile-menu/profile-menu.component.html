<ng-template #notification>
  <div class="message">{{message}}</div>
  <div class="buttons">
    <div class="btn btn-cancel" (click)="popover.close()">Do it later</div>
    <div class="btn btn-ok" (click)="editProfile()">Ok</div>
  </div>
</ng-template>
<a class="menulinks" (click)="goChatRoom()"><span class="icon-chat-conversation"></span></a>

<a class="menulinks" (click)="goNotifications()"><span class="icon-notifications"></span><span class="badge">{{notificationcount}}</span></a>

<div ngbDropdown class="d-inline-block" #menu="ngbDropdown">
  <div class="btn profile-menu-btn" ngbDropdownToggle>
    <div class="profile-icon" [ngbPopover]="notification" triggers="" (shown)="onPopoverShown()">
      <img
        *ngIf="photo"
        [src]="photo"
      >
    </div>
    <div class="profile-caption">
      <div class="profile-name">{{name}}</div>
      <div class="profile-role">{{role}}</div>
      <div class="profile-role" *ngIf="isTemporaryUser">Password: {{tempPassword}}</div>
    </div>
    <i class="fa toggle-icon"
       [class.fa-caret-up]="menu.isOpen()"
       [class.fa-caret-down]="!menu.isOpen()"></i>
  </div>
  <div class="dropdown-menu" ngbDropdownMenu>
    <div class="profile-item dropdown-item" (click)="openProfile()">
      <div class="profile-icon">
        <img
          *ngIf="photo"
          [src]="photo"
        >
      </div>
      <div class="profile-item-caption">
        <div class="profile-item-name">{{name}}</div>
        <div class="profile-item-subtitle">My profile</div>
      </div>
    </div>
    <div class="separator"></div>
    <button class="dropdown-item" (click)="setRole(Roles.Employee)"><i class="fa fa-check" *ngIf="role == Roles.Employee"></i><i class="fa fa-circle menu-icon employee"></i> Employee
      
    </button>
    <button class="dropdown-item" (click)="setRole(Roles.Creator)"><i class="fa fa-check" *ngIf="role == Roles.Creator"></i><i class="fa fa-circle menu-icon creator"></i> Creator
      
    </button>
    <button class="dropdown-item" (click)="setRole(Roles.Backer)"><i class="fa fa-check" *ngIf="role == Roles.Backer"></i><i class="fa fa-circle menu-icon backer"></i> Backer
      
    </button>
    <div class="separator"></div>
    <button class="dropdown-item" (click)="signOut()"><i class="fa fa-sign-out menu-icon"></i> Sign out</button>
  </div>
</div>
